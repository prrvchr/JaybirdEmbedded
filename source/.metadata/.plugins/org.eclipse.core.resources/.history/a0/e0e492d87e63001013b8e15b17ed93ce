package io.github.prrvchr.firebird_5_0_3;

import org.firebirdsql.jna.embedded.classpath.ClasspathFirebirdEmbeddedLibrary;
import org.firebirdsql.jna.embedded.classpath.ClasspathFirebirdEmbeddedResource;
import org.firebirdsql.jna.embedded.spi.FirebirdEmbeddedLoadingException;
import org.firebirdsql.jna.embedded.spi.FirebirdEmbeddedLibrary;

public class FirebirdEmbeddedProvider 
        implements org.firebirdsql.jna.embedded.spi.FirebirdEmbeddedProvider {

    @Override
    public String getPlatform() {
        return "win32-x86-64";
    }

    @Override
    public String getVersion() {
        return "WI-V3.0.5.33220 Firebird 3.0";
    }

    @Override
    public FirebirdEmbeddedLibrary getFirebirdEmbeddedLibrary() 
            throws FirebirdEmbeddedLoadingException {
        return ClasspathFirebirdEmbeddedLibrary.load(this, new ResourceInfo());
    }

    private static class ResourceInfo implements ClasspathFirebirdEmbeddedResource {

        @Override
        public String getLibraryEntryPoint() {
            return "fbclient.dll";
        }

        @Override
        public Collection<String> getResourceList() {
            return Arrays.asList(
                "intl/fbintl.conf",
                "intl/fbintl.dll",
                "plugins/engine12.dll",
                "plugins/udr_engine.conf",
                "plugins/udr_engine.dll",
                "fbclient.dll",
                "firebird.conf",
                "firebird.msg",
                "ib_util.dll",
                "icudt52.dll",
                "icudt52l.dat",
                "icuin52.dll",
                "icuuc52.dll",
                "plugins.conf"
            );
        }
    }
}

